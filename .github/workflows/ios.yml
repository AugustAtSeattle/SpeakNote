name: iOS Build

on: [push, pull_request]

jobs:
  build:
    name: Build iOS project
    runs-on: macos-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: Set up Xcode
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: 'latest' # Specify the Xcode version

    - name: Select a Simulator
      run: echo "SIMULATOR_UDID=$(xcrun simctl list devices available | grep 'iPhone 12' | awk -F ' - ' '{print $NF}' | head -1)" >> $GITHUB_ENV

    - name: Build iOS project
      run: |
        xcodebuild build -project SpeakNote.xcodeproj \
          -scheme SpeakNote \
          -SDK iPhone simulator \
          -destination "platform=iOS Simulator,id=$SIMULATOR_UDID" \
          CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO
